# Многопоточный обработчик массивов

Этот проект реализует многопоточное приложение, которое обрабатывает массив целых чисел с использованием трех потоков:

- **Главный поток**: Создает массив, запускает рабочие потоки и заменяет минимальные/максимальные элементы средним значением
- **Поток Min-Max**: Находит минимальный и максимальный элементы в массиве
- **Поток среднего значения**: Вычисляет среднее арифметическое всех элементов в массиве

Проект включает две реализации:
1. Использование Windows API (WinAPI) для управления потоками
2. Использование `std::thread` из стандартной библиотеки C++

Обе реализации покрыты комплексными модульными тестами с использованием Google Test.

## Требования

- CMake 3.14 или выше
- Компилятор, совместимый с C++14
- Операционная система Windows (для реализации WinAPI)
- Google Test (загружается автоматически через CMake)

## Структура проекта

```
thread_array_processor/
├── CMakeLists.txt                  # Основной файл конфигурации CMake
├── src/
│   ├── winapi/
│   │   ├── main.cpp                # Основная программа реализации WinAPI
│   │   ├── thread_processor.h      # Заголовочный файл реализации WinAPI
│   │   └── thread_processor.cpp    # Исходный файл реализации WinAPI
│   └── stdthread/
│       ├── main.cpp                # Основная программа реализации std::thread
│       ├── thread_processor.h      # Заголовочный файл реализации std::thread
│       └── thread_processor.cpp    # Исходный файл реализации std::thread
├── tests/
│   ├── CMakeLists.txt              # Конфигурация тестов CMake
│   ├── winapi/
│   │   └── winapi_tests.cpp        # Набор тестов Google Test для реализации WinAPI
│   └── stdthread/
│       └── stdthread_tests.cpp     # Набор тестов Google Test для реализации std::thread
└── README.md                       # Этот файл
```

## Инструкции по сборке

### Сборка с использованием командной строки CMake

```bash
# Создать директорию для сборки
mkdir build
cd build

# Настроить проект
cmake ..

# Собрать проект
cmake --build .

# Запустить тесты
ctest
```

### Сборка с использованием Visual Studio

1. Откройте папку проекта в Visual Studio
2. Visual Studio должна автоматически обнаружить файл CMakeLists.txt
3. Выберите желаемую конфигурацию (Debug/Release) и цель
4. Соберите и запустите проект

## Использование

Программа запросит у вас ввод:
1. Размер массива
2. Элементы массива

Затем она создаст необходимые потоки, обработает массив и отобразит:
- Минимальное значение и его индекс
- Максимальное значение и его индекс
- Среднее значение
- Измененный массив с мин/макс элементами, замененными на среднее значение

## Детали реализации потоков

### Реализация WinAPI

Реализация WinAPI использует:
- `CreateThread()` для создания потоков
- `WaitForSingleObject()` для ожидания завершения потоков
- `Sleep()` для имитации времени обработки

### Реализация std::thread

Реализация std::thread использует:
- Класс `std::thread` для управления потоками
- `std::this_thread::sleep_for()` для задержек
- `std::mutex` и `std::lock_guard` для потокобезопасного вывода в консоль

## Тестирование

Проект использует Google Test для модульного тестирования. Тесты покрывают:
- Основную функциональность поиска мин/макс элементов
- Вычисление средних значений
- Граничные случаи, такие как пустые массивы и массивы с одним элементом
- Массивы с дублирующимися мин/макс значениями
- Потокобезопасность
